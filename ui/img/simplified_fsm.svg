<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: varnishfsm Pages: 1 -->
<svg width="565pt" height="982pt"
 viewBox="0.00 0.00 565.00 982.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 978)">
<title>varnishfsm</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-978 561,-978 561,4 -4,4"/>
<g id="clust1" class="cluster"><title>clusterfrontend</title>
<polygon fill="none" stroke="black" points="8,-8 8,-910 549,-910 549,-8 8,-8"/>
<text text-anchor="middle" x="115" y="-894.8" font-family="Times,serif" font-size="14.00">Frontend (From Client) Workthread</text>
</g>
<g id="clust4" class="cluster"><title>clusterbackend</title>
<polygon fill="aliceblue" stroke="black" points="28,-166 28,-565 396,-565 396,-166 28,-166"/>
<text text-anchor="middle" x="128" y="-549.8" font-family="Times,serif" font-size="14.00">Backend (To Server) Workthread</text>
</g>
<!-- Request -->
<g id="node1" class="node"><title>Request</title>
<polygon fill="none" stroke="black" points="250,-974 194.776,-956 250,-938 305.224,-956 250,-974"/>
<polyline fill="none" stroke="black" points="206.185,-959.719 206.185,-952.281 "/>
<polyline fill="none" stroke="black" points="238.591,-941.719 261.409,-941.719 "/>
<polyline fill="none" stroke="black" points="293.815,-952.281 293.815,-959.719 "/>
<polyline fill="none" stroke="black" points="261.409,-970.281 238.591,-970.281 "/>
<text text-anchor="middle" x="250" y="-952.3" font-family="Times,serif" font-size="14.00">Request</text>
</g>
<!-- vcl_recv -->
<g id="node3" class="node"><title>vcl_recv</title>
<ellipse fill="none" stroke="black" cx="312" cy="-861" rx="40.4202" ry="18"/>
<text text-anchor="middle" x="312" y="-857.3" font-family="Times,serif" font-size="14.00">vcl_recv</text>
</g>
<!-- Request&#45;&gt;vcl_recv -->
<g id="edge1" class="edge"><title>Request&#45;&gt;vcl_recv</title>
<path fill="none" stroke="black" d="M259.416,-940.875C268.936,-926.596 283.846,-904.23 295.362,-886.957"/>
<polygon fill="black" stroke="black" points="298.393,-888.72 301.028,-878.458 292.569,-884.837 298.393,-888.72"/>
</g>
<!-- restart1 -->
<g id="node2" class="node"><title>restart1</title>
<polygon fill="none" stroke="black" points="374,-974 323.67,-956 374,-938 424.33,-956 374,-974"/>
<polyline fill="none" stroke="black" points="334.969,-960.041 334.969,-951.959 "/>
<polyline fill="none" stroke="black" points="362.701,-942.041 385.299,-942.041 "/>
<polyline fill="none" stroke="black" points="413.031,-951.959 413.031,-960.041 "/>
<polyline fill="none" stroke="black" points="385.299,-969.959 362.701,-969.959 "/>
<text text-anchor="middle" x="374" y="-952.3" font-family="Times,serif" font-size="14.00">Restart</text>
</g>
<!-- restart1&#45;&gt;vcl_recv -->
<g id="edge2" class="edge"><title>restart1&#45;&gt;vcl_recv</title>
<path fill="none" stroke="black" d="M364.584,-940.875C355.064,-926.596 340.154,-904.23 328.638,-886.957"/>
<polygon fill="black" stroke="black" points="331.431,-884.837 322.972,-878.458 325.607,-888.72 331.431,-884.837"/>
</g>
<!-- vcl_hash -->
<g id="node9" class="node"><title>vcl_hash</title>
<ellipse fill="none" stroke="black" cx="312" cy="-773" rx="42.3701" ry="18"/>
<text text-anchor="middle" x="312" y="-769.3" font-family="Times,serif" font-size="14.00">vcl_hash</text>
</g>
<!-- vcl_recv&#45;&gt;vcl_hash -->
<g id="edge3" class="edge"><title>vcl_recv&#45;&gt;vcl_hash</title>
<path fill="none" stroke="black" d="M312,-842.597C312,-830.746 312,-814.817 312,-801.292"/>
<polygon fill="black" stroke="black" points="315.5,-801.084 312,-791.084 308.5,-801.084 315.5,-801.084"/>
<text text-anchor="middle" x="331" y="-813.3" font-family="Times,serif" font-size="14.00">lookup</text>
</g>
<!-- vcl_pipe -->
<g id="node10" class="node"><title>vcl_pipe</title>
<ellipse fill="none" stroke="black" cx="480" cy="-773" rx="40.4202" ry="18"/>
<text text-anchor="middle" x="480" y="-769.3" font-family="Times,serif" font-size="14.00">vcl_pipe</text>
</g>
<!-- vcl_recv&#45;&gt;vcl_pipe -->
<g id="edge4" class="edge"><title>vcl_recv&#45;&gt;vcl_pipe</title>
<path fill="none" stroke="orange" d="M337.516,-846.938C366.339,-832.184 413.4,-808.093 445.487,-791.667"/>
<polygon fill="orange" stroke="orange" points="447.213,-794.716 454.52,-787.043 444.024,-788.485 447.213,-794.716"/>
</g>
<!-- vcl_pass -->
<g id="node11" class="node"><title>vcl_pass</title>
<ellipse fill="none" stroke="black" cx="142" cy="-611" rx="40.4202" ry="18"/>
<text text-anchor="middle" x="142" y="-607.3" font-family="Times,serif" font-size="14.00">vcl_pass</text>
</g>
<!-- vcl_recv&#45;&gt;vcl_pass -->
<g id="edge5" class="edge"><title>vcl_recv&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M275.19,-853.247C209.868,-838.978 75.9541,-798.834 27,-703 19.7215,-688.751 18.4692,-680.536 27,-667 42.0525,-643.116 70.659,-629.378 95.5738,-621.605"/>
<polygon fill="red" stroke="red" points="96.6195,-624.946 105.26,-618.815 94.682,-618.219 96.6195,-624.946"/>
<text text-anchor="middle" x="61" y="-725.3" font-family="Times,serif" font-size="14.00">pass</text>
</g>
<!-- vcl_deliver -->
<g id="node4" class="node"><title>vcl_deliver</title>
<ellipse fill="none" stroke="black" cx="126" cy="-118" rx="50.0684" ry="18"/>
<text text-anchor="middle" x="126" y="-114.3" font-family="Times,serif" font-size="14.00">vcl_deliver</text>
</g>
<!-- Done -->
<g id="node12" class="node"><title>Done</title>
<polygon fill="none" stroke="black" points="430,-62 384,-62 384,-16 430,-16 430,-62"/>
<polyline fill="none" stroke="black" points="396,-62 384,-50 "/>
<polyline fill="none" stroke="black" points="384,-28 396,-16 "/>
<polyline fill="none" stroke="black" points="418,-16 430,-28 "/>
<polyline fill="none" stroke="black" points="430,-50 418,-62 "/>
<text text-anchor="middle" x="407" y="-35.3" font-family="Times,serif" font-size="14.00">Done</text>
</g>
<!-- vcl_deliver&#45;&gt;Done -->
<g id="edge27" class="edge"><title>vcl_deliver&#45;&gt;Done</title>
<path fill="none" stroke="black" d="M164.483,-106.455C220.003,-91.241 321.638,-63.3911 373.953,-49.0556"/>
<polygon fill="black" stroke="black" points="375.01,-52.3949 383.73,-46.3765 373.16,-45.6438 375.01,-52.3949"/>
</g>
<!-- vcl_synth -->
<g id="node5" class="node"><title>vcl_synth</title>
<ellipse fill="none" stroke="black" cx="407" cy="-118" rx="44.271" ry="18"/>
<text text-anchor="middle" x="407" y="-114.3" font-family="Times,serif" font-size="14.00">vcl_synth</text>
</g>
<!-- vcl_synth&#45;&gt;Done -->
<g id="edge28" class="edge"><title>vcl_synth&#45;&gt;Done</title>
<path fill="none" stroke="black" d="M407,-99.9112C407,-91.7118 407,-81.6125 407,-72.0581"/>
<polygon fill="black" stroke="black" points="410.5,-72.02 407,-62.02 403.5,-72.02 410.5,-72.02"/>
</g>
<!-- vcl_hit -->
<g id="node6" class="node"><title>vcl_hit</title>
<ellipse fill="none" stroke="black" cx="71" cy="-685" rx="35.1455" ry="18"/>
<text text-anchor="middle" x="71" y="-681.3" font-family="Times,serif" font-size="14.00">vcl_hit</text>
</g>
<!-- vcl_hit&#45;&gt;vcl_deliver -->
<g id="edge13" class="edge"><title>vcl_hit&#45;&gt;vcl_deliver</title>
<path fill="none" stroke="darkgreen" d="M51.5048,-669.765C36.0371,-656.68 17,-635.75 17,-612 17,-612 17,-612 17,-191 17,-179.462 16.5138,-174.78 24,-166 37.4656,-150.207 57.3681,-139.421 76.0264,-132.21"/>
<polygon fill="darkgreen" stroke="darkgreen" points="77.4036,-135.434 85.6294,-128.757 75.0349,-128.847 77.4036,-135.434"/>
</g>
<!-- vcl_hit&#45;&gt;vcl_pass -->
<g id="edge14" class="edge"><title>vcl_hit&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M86.0573,-668.731C95.7147,-658.937 108.434,-646.039 119.304,-635.016"/>
<polygon fill="red" stroke="red" points="121.944,-637.323 126.474,-627.745 116.96,-632.408 121.944,-637.323"/>
</g>
<!-- vcl_miss -->
<g id="node7" class="node"><title>vcl_miss</title>
<ellipse fill="none" stroke="black" cx="265" cy="-685" rx="42.3701" ry="18"/>
<text text-anchor="middle" x="265" y="-681.3" font-family="Times,serif" font-size="14.00">vcl_miss</text>
</g>
<!-- vcl_miss&#45;&gt;vcl_pass -->
<g id="edge18" class="edge"><title>vcl_miss&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M241.284,-670.118C222.311,-659.012 195.505,-643.32 174.528,-631.041"/>
<polygon fill="red" stroke="red" points="176.041,-627.871 165.643,-625.84 172.505,-633.912 176.041,-627.871"/>
</g>
<!-- vcl_backend_fetch -->
<g id="node14" class="node"><title>vcl_backend_fetch</title>
<ellipse fill="none" stroke="black" cx="167" cy="-516" rx="77.0154" ry="18"/>
<text text-anchor="middle" x="167" y="-512.3" font-family="Times,serif" font-size="14.00">vcl_backend_fetch</text>
</g>
<!-- vcl_miss&#45;&gt;vcl_backend_fetch -->
<g id="edge15" class="edge"><title>vcl_miss&#45;&gt;vcl_backend_fetch</title>
<path fill="none" stroke="black" d="M255.245,-667.377C238.09,-638.144 202.415,-577.35 182.07,-542.68"/>
<polygon fill="black" stroke="black" points="185.087,-540.906 177.007,-534.053 179.05,-544.449 185.087,-540.906"/>
</g>
<!-- vcl_purge -->
<g id="node8" class="node"><title>vcl_purge</title>
<ellipse fill="none" stroke="black" cx="371" cy="-685" rx="46.2191" ry="18"/>
<text text-anchor="middle" x="371" y="-681.3" font-family="Times,serif" font-size="14.00">vcl_purge</text>
</g>
<!-- vcl_purge&#45;&gt;vcl_synth -->
<g id="edge12" class="edge"><title>vcl_purge&#45;&gt;vcl_synth</title>
<path fill="none" stroke="purple" d="M384.61,-667.693C394.805,-653.798 407,-632.823 407,-612 407,-612 407,-612 407,-191 407,-176.205 407,-159.7 407,-146.229"/>
<polygon fill="purple" stroke="purple" points="410.5,-146.166 407,-136.166 403.5,-146.166 410.5,-146.166"/>
</g>
<!-- vcl_hash&#45;&gt;vcl_hit -->
<g id="edge7" class="edge"><title>vcl_hash&#45;&gt;vcl_hit</title>
<path fill="none" stroke="darkgreen" d="M270.03,-771.356C229.905,-769.157 168.765,-761.572 122,-737 109.58,-730.474 98.2621,-719.891 89.4609,-710.052"/>
<polygon fill="darkgreen" stroke="darkgreen" points="92.1118,-707.767 82.969,-702.413 86.7777,-712.3 92.1118,-707.767"/>
<text text-anchor="middle" x="129.5" y="-725.3" font-family="Times,serif" font-size="14.00">hit</text>
</g>
<!-- vcl_hash&#45;&gt;vcl_miss -->
<g id="edge8" class="edge"><title>vcl_hash&#45;&gt;vcl_miss</title>
<path fill="none" stroke="black" d="M302.938,-755.418C296.155,-743.006 286.751,-725.799 279.003,-711.622"/>
<polygon fill="black" stroke="black" points="282.062,-709.921 274.195,-702.824 275.919,-713.278 282.062,-709.921"/>
<text text-anchor="middle" x="306" y="-725.3" font-family="Times,serif" font-size="14.00">miss</text>
</g>
<!-- vcl_hash&#45;&gt;vcl_purge -->
<g id="edge11" class="edge"><title>vcl_hash&#45;&gt;vcl_purge</title>
<path fill="none" stroke="purple" d="M323.376,-755.418C332.028,-742.807 344.075,-725.246 353.888,-710.942"/>
<polygon fill="purple" stroke="purple" points="356.888,-712.757 359.659,-702.531 351.116,-708.797 356.888,-712.757"/>
<text text-anchor="middle" x="362.5" y="-725.3" font-family="Times,serif" font-size="14.00">purge</text>
</g>
<!-- vcl_hash&#45;&gt;vcl_pass -->
<g id="edge9" class="edge"><title>vcl_hash&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M272.479,-766.588C234.761,-759.176 179.574,-742.006 151,-703 137.701,-684.846 136.37,-658.896 137.831,-639.349"/>
<polygon fill="red" stroke="red" points="141.33,-639.545 138.872,-629.239 134.366,-638.828 141.33,-639.545"/>
<text text-anchor="middle" x="182.5" y="-681.3" font-family="Times,serif" font-size="14.00">hit&#45;for&#45;pass</text>
</g>
<!-- waiting -->
<g id="node13" class="node"><title>waiting</title>
<polygon fill="none" stroke="black" points="520.17,-685 499.085,-703 456.915,-703 435.83,-685 456.915,-667 499.085,-667 520.17,-685"/>
<text text-anchor="middle" x="478" y="-681.3" font-family="Times,serif" font-size="14.00">waiting</text>
</g>
<!-- vcl_hash&#45;&gt;waiting -->
<g id="edge10" class="edge"><title>vcl_hash&#45;&gt;waiting</title>
<path fill="none" stroke="black" d="M345.191,-761.537C363.067,-755.37 385.238,-746.851 404,-737 419.298,-728.968 435.209,-718.341 448.339,-708.868"/>
<polygon fill="black" stroke="black" points="450.545,-711.59 456.531,-702.848 446.4,-705.949 450.545,-711.59"/>
<text text-anchor="middle" x="442" y="-725.3" font-family="Times,serif" font-size="14.00">busy</text>
</g>
<!-- vcl_pipe&#45;&gt;Done -->
<g id="edge6" class="edge"><title>vcl_pipe&#45;&gt;Done</title>
<path fill="none" stroke="orange" d="M498.984,-757.078C516.562,-741.44 540,-715.128 540,-686 540,-686 540,-686 540,-117 540,-70.9548 479.557,-51.9977 440.165,-44.5322"/>
<polygon fill="orange" stroke="orange" points="440.618,-41.0587 430.167,-42.795 439.42,-47.9553 440.618,-41.0587"/>
</g>
<!-- vcl_pass&#45;&gt;vcl_backend_fetch -->
<g id="edge17" class="edge"><title>vcl_pass&#45;&gt;vcl_backend_fetch</title>
<path fill="none" stroke="black" d="M146.585,-592.942C150.263,-579.263 155.492,-559.81 159.737,-544.017"/>
<polygon fill="black" stroke="black" points="163.143,-544.83 162.359,-534.264 156.383,-543.013 163.143,-544.83"/>
</g>
<!-- waiting&#45;&gt;vcl_hash -->
<g id="edge16" class="edge"><title>waiting&#45;&gt;vcl_hash</title>
<path fill="none" stroke="black" d="M450.307,-697.616C436.132,-703.929 418.791,-712.228 404,-721 393.601,-727.167 392.331,-730.72 382,-737 371.583,-743.332 359.87,-749.525 349.049,-754.898"/>
<polygon fill="black" stroke="black" points="347.281,-751.866 339.824,-759.392 350.347,-758.159 347.281,-751.866"/>
</g>
<!-- decision1 -->
<g id="node15" class="node"><title>decision1</title>
<polygon fill="none" stroke="black" points="167,-460 40.7337,-442 167,-424 293.266,-442 167,-460"/>
<text text-anchor="middle" x="167" y="-438.3" font-family="Times,serif" font-size="14.00">if (conditions(beresp))</text>
</g>
<!-- vcl_backend_fetch&#45;&gt;decision1 -->
<g id="edge19" class="edge"><title>vcl_backend_fetch&#45;&gt;decision1</title>
<path fill="none" stroke="black" d="M167,-497.937C167,-489.807 167,-479.876 167,-470.705"/>
<polygon fill="black" stroke="black" points="170.5,-470.441 167,-460.441 163.5,-470.441 170.5,-470.441"/>
</g>
<!-- vcl_backend_response -->
<g id="node16" class="node"><title>vcl_backend_response</title>
<ellipse fill="none" stroke="black" cx="126" cy="-354" rx="90.0136" ry="18"/>
<text text-anchor="middle" x="126" y="-350.3" font-family="Times,serif" font-size="14.00">vcl_backend_response</text>
</g>
<!-- decision1&#45;&gt;vcl_backend_response -->
<g id="edge20" class="edge"><title>decision1&#45;&gt;vcl_backend_response</title>
<path fill="none" stroke="black" d="M159.288,-424.824C153.446,-412.569 145.295,-395.473 138.522,-381.266"/>
<polygon fill="black" stroke="black" points="141.561,-379.506 134.098,-371.986 135.242,-382.519 141.561,-379.506"/>
<text text-anchor="middle" x="162" y="-394.3" font-family="Times,serif" font-size="14.00">true</text>
</g>
<!-- vcl_backend_error -->
<g id="node17" class="node"><title>vcl_backend_error</title>
<ellipse fill="none" stroke="black" cx="311" cy="-354" rx="76.5394" ry="18"/>
<text text-anchor="middle" x="311" y="-350.3" font-family="Times,serif" font-size="14.00">vcl_backend_error</text>
</g>
<!-- decision1&#45;&gt;vcl_backend_error -->
<g id="edge21" class="edge"><title>decision1&#45;&gt;vcl_backend_error</title>
<path fill="none" stroke="black" d="M187.53,-426.837C203.073,-416.298 225.077,-401.763 245,-390 253.372,-385.057 262.5,-380.008 271.224,-375.339"/>
<polygon fill="black" stroke="black" points="272.918,-378.402 280.119,-370.631 269.643,-372.215 272.918,-378.402"/>
<text text-anchor="middle" x="258" y="-394.3" font-family="Times,serif" font-size="14.00">false</text>
</g>
<!-- decision4 -->
<g id="node18" class="node"><title>decision4</title>
<polygon fill="none" stroke="black" points="126,-298 56.7149,-280 126,-262 195.285,-280 126,-298"/>
<text text-anchor="middle" x="126" y="-276.3" font-family="Times,serif" font-size="14.00">cacheable?</text>
</g>
<!-- vcl_backend_response&#45;&gt;decision4 -->
<g id="edge22" class="edge"><title>vcl_backend_response&#45;&gt;decision4</title>
<path fill="none" stroke="black" d="M126,-335.937C126,-327.807 126,-317.876 126,-308.705"/>
<polygon fill="black" stroke="black" points="129.5,-308.441 126,-298.441 122.5,-308.441 129.5,-308.441"/>
</g>
<!-- cache -->
<g id="node19" class="node"><title>cache</title>
<polygon fill="none" stroke="black" points="217,-210 163,-210 163,-174 217,-174 217,-210"/>
<text text-anchor="middle" x="190" y="-188.3" font-family="Times,serif" font-size="14.00">cache</text>
</g>
<!-- decision4&#45;&gt;cache -->
<g id="edge23" class="edge"><title>decision4&#45;&gt;cache</title>
<path fill="none" stroke="blue" d="M143.938,-266.516C151.764,-260.406 160.595,-252.533 167,-244 172.532,-236.63 177.123,-227.718 180.71,-219.419"/>
<polygon fill="blue" stroke="blue" points="183.979,-220.672 184.456,-210.088 177.483,-218.064 183.979,-220.672"/>
<text text-anchor="middle" x="186.5" y="-232.3" font-family="Times,serif" font-size="14.00">yes</text>
</g>
<!-- nocache -->
<g id="node20" class="node"><title>nocache</title>
<polygon fill="none" stroke="black" points="145,-210 59,-210 59,-174 145,-174 145,-210"/>
<text text-anchor="middle" x="102" y="-188.3" font-family="Times,serif" font-size="14.00">do not cache</text>
</g>
<!-- decision4&#45;&gt;nocache -->
<g id="edge24" class="edge"><title>decision4&#45;&gt;nocache</title>
<path fill="none" stroke="red" d="M114.741,-264.856C110.566,-258.791 106.292,-251.405 104,-244 101.694,-236.551 100.737,-228.197 100.475,-220.44"/>
<polygon fill="red" stroke="red" points="103.975,-220.377 100.485,-210.374 96.9745,-220.37 103.975,-220.377"/>
<text text-anchor="middle" x="135.5" y="-232.3" font-family="Times,serif" font-size="14.00">hit&#45;for&#45;pass</text>
</g>
<!-- cache&#45;&gt;vcl_deliver -->
<g id="edge25" class="edge"><title>cache&#45;&gt;vcl_deliver</title>
<path fill="none" stroke="blue" d="M174.833,-173.937C166.666,-164.749 156.454,-153.261 147.484,-143.169"/>
<polygon fill="blue" stroke="blue" points="149.877,-140.594 140.618,-135.445 144.645,-145.244 149.877,-140.594"/>
</g>
<!-- nocache&#45;&gt;vcl_deliver -->
<g id="edge26" class="edge"><title>nocache&#45;&gt;vcl_deliver</title>
<path fill="none" stroke="red" d="M107.688,-173.937C110.497,-165.508 113.952,-155.143 117.101,-145.696"/>
<polygon fill="red" stroke="red" points="120.511,-146.534 120.353,-135.941 113.87,-144.321 120.511,-146.534"/>
</g>
</g>
</svg>
