<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.36.0 (20140111.2315)
 -->
<!-- Title: varnishfsm Pages: 1 -->
<svg width="565pt" height="968pt"
 viewBox="0.00 0.00 565.00 968.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 964)">
<title>varnishfsm</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-964 561,-964 561,4 -4,4"/>
<g id="clust1" class="cluster"><title>clusterfrontend</title>
<polygon fill="none" stroke="black" points="8,-8 8,-896 549,-896 549,-8 8,-8"/>
<text text-anchor="middle" x="115" y="-880.8" font-family="Times,serif" font-size="14.00">Frontend (From Client) Workthread</text>
</g>
<g id="clust4" class="cluster"><title>clusterbackend</title>
<polygon fill="aliceblue" stroke="black" points="28,-166 28,-551 396,-551 396,-166 28,-166"/>
<text text-anchor="middle" x="128" y="-535.8" font-family="Times,serif" font-size="14.00">Backend (To Server) Workthread</text>
</g>
<!-- Request -->
<g id="node1" class="node"><title>Request</title>
<polygon fill="none" stroke="black" points="250,-960 194.776,-942 250,-924 305.224,-942 250,-960"/>
<polyline fill="none" stroke="black" points="206.185,-945.719 206.185,-938.281 "/>
<polyline fill="none" stroke="black" points="238.591,-927.719 261.409,-927.719 "/>
<polyline fill="none" stroke="black" points="293.815,-938.281 293.815,-945.719 "/>
<polyline fill="none" stroke="black" points="261.409,-956.281 238.591,-956.281 "/>
<text text-anchor="middle" x="250" y="-938.3" font-family="Times,serif" font-size="14.00">Request</text>
</g>
<!-- vcl_recv -->
<g id="node3" class="node"><title>vcl_recv</title>
<ellipse fill="none" stroke="black" cx="312" cy="-847" rx="40.4202" ry="18"/>
<text text-anchor="middle" x="312" y="-843.3" font-family="Times,serif" font-size="14.00">vcl_recv</text>
</g>
<!-- Request&#45;&gt;vcl_recv -->
<g id="edge1" class="edge"><title>Request&#45;&gt;vcl_recv</title>
<path fill="none" stroke="black" d="M259.416,-926.875C268.936,-912.596 283.846,-890.23 295.362,-872.957"/>
<polygon fill="black" stroke="black" points="298.393,-874.72 301.028,-864.458 292.569,-870.837 298.393,-874.72"/>
</g>
<!-- restart1 -->
<g id="node2" class="node"><title>restart1</title>
<polygon fill="none" stroke="black" points="374,-960 323.67,-942 374,-924 424.33,-942 374,-960"/>
<polyline fill="none" stroke="black" points="334.969,-946.041 334.969,-937.959 "/>
<polyline fill="none" stroke="black" points="362.701,-928.041 385.299,-928.041 "/>
<polyline fill="none" stroke="black" points="413.031,-937.959 413.031,-946.041 "/>
<polyline fill="none" stroke="black" points="385.299,-955.959 362.701,-955.959 "/>
<text text-anchor="middle" x="374" y="-938.3" font-family="Times,serif" font-size="14.00">Restart</text>
</g>
<!-- restart1&#45;&gt;vcl_recv -->
<g id="edge2" class="edge"><title>restart1&#45;&gt;vcl_recv</title>
<path fill="none" stroke="black" d="M364.584,-926.875C355.064,-912.596 340.154,-890.23 328.638,-872.957"/>
<polygon fill="black" stroke="black" points="331.431,-870.837 322.972,-864.458 325.607,-874.72 331.431,-870.837"/>
</g>
<!-- vcl_hash -->
<g id="node9" class="node"><title>vcl_hash</title>
<ellipse fill="none" stroke="black" cx="312" cy="-759" rx="42.3701" ry="18"/>
<text text-anchor="middle" x="312" y="-755.3" font-family="Times,serif" font-size="14.00">vcl_hash</text>
</g>
<!-- vcl_recv&#45;&gt;vcl_hash -->
<g id="edge3" class="edge"><title>vcl_recv&#45;&gt;vcl_hash</title>
<path fill="none" stroke="black" d="M312,-828.597C312,-816.746 312,-800.817 312,-787.292"/>
<polygon fill="black" stroke="black" points="315.5,-787.084 312,-777.084 308.5,-787.084 315.5,-787.084"/>
<text text-anchor="middle" x="331" y="-799.3" font-family="Times,serif" font-size="14.00">lookup</text>
</g>
<!-- vcl_pipe -->
<g id="node10" class="node"><title>vcl_pipe</title>
<ellipse fill="none" stroke="black" cx="480" cy="-759" rx="40.4202" ry="18"/>
<text text-anchor="middle" x="480" y="-755.3" font-family="Times,serif" font-size="14.00">vcl_pipe</text>
</g>
<!-- vcl_recv&#45;&gt;vcl_pipe -->
<g id="edge4" class="edge"><title>vcl_recv&#45;&gt;vcl_pipe</title>
<path fill="none" stroke="orange" d="M337.516,-832.938C366.339,-818.184 413.4,-794.093 445.487,-777.667"/>
<polygon fill="orange" stroke="orange" points="447.213,-780.716 454.52,-773.043 444.024,-774.485 447.213,-780.716"/>
</g>
<!-- vcl_pass -->
<g id="node11" class="node"><title>vcl_pass</title>
<ellipse fill="none" stroke="black" cx="142" cy="-597" rx="40.4202" ry="18"/>
<text text-anchor="middle" x="142" y="-593.3" font-family="Times,serif" font-size="14.00">vcl_pass</text>
</g>
<!-- vcl_recv&#45;&gt;vcl_pass -->
<g id="edge5" class="edge"><title>vcl_recv&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M275.19,-839.247C209.868,-824.978 75.9541,-784.834 27,-689 19.7215,-674.751 18.4692,-666.536 27,-653 42.0525,-629.116 70.659,-615.378 95.5738,-607.605"/>
<polygon fill="red" stroke="red" points="96.6195,-610.946 105.26,-604.815 94.682,-604.219 96.6195,-610.946"/>
<text text-anchor="middle" x="61" y="-711.3" font-family="Times,serif" font-size="14.00">pass</text>
</g>
<!-- vcl_deliver -->
<g id="node4" class="node"><title>vcl_deliver</title>
<ellipse fill="none" stroke="black" cx="126" cy="-118" rx="50.0684" ry="18"/>
<text text-anchor="middle" x="126" y="-114.3" font-family="Times,serif" font-size="14.00">vcl_deliver</text>
</g>
<!-- Done -->
<g id="node12" class="node"><title>Done</title>
<polygon fill="none" stroke="black" points="430,-62 384,-62 384,-16 430,-16 430,-62"/>
<polyline fill="none" stroke="black" points="396,-62 384,-50 "/>
<polyline fill="none" stroke="black" points="384,-28 396,-16 "/>
<polyline fill="none" stroke="black" points="418,-16 430,-28 "/>
<polyline fill="none" stroke="black" points="430,-50 418,-62 "/>
<text text-anchor="middle" x="407" y="-35.3" font-family="Times,serif" font-size="14.00">Done</text>
</g>
<!-- vcl_deliver&#45;&gt;Done -->
<g id="edge27" class="edge"><title>vcl_deliver&#45;&gt;Done</title>
<path fill="none" stroke="black" d="M164.483,-106.455C220.003,-91.241 321.638,-63.3911 373.953,-49.0556"/>
<polygon fill="black" stroke="black" points="375.01,-52.3949 383.73,-46.3765 373.16,-45.6438 375.01,-52.3949"/>
</g>
<!-- vcl_synth -->
<g id="node5" class="node"><title>vcl_synth</title>
<ellipse fill="none" stroke="black" cx="407" cy="-118" rx="44.271" ry="18"/>
<text text-anchor="middle" x="407" y="-114.3" font-family="Times,serif" font-size="14.00">vcl_synth</text>
</g>
<!-- vcl_synth&#45;&gt;Done -->
<g id="edge28" class="edge"><title>vcl_synth&#45;&gt;Done</title>
<path fill="none" stroke="black" d="M407,-99.9112C407,-91.7118 407,-81.6125 407,-72.0581"/>
<polygon fill="black" stroke="black" points="410.5,-72.02 407,-62.02 403.5,-72.02 410.5,-72.02"/>
</g>
<!-- vcl_hit -->
<g id="node6" class="node"><title>vcl_hit</title>
<ellipse fill="none" stroke="black" cx="71" cy="-671" rx="35.1455" ry="18"/>
<text text-anchor="middle" x="71" y="-667.3" font-family="Times,serif" font-size="14.00">vcl_hit</text>
</g>
<!-- vcl_hit&#45;&gt;vcl_deliver -->
<g id="edge13" class="edge"><title>vcl_hit&#45;&gt;vcl_deliver</title>
<path fill="none" stroke="darkgreen" d="M51.5048,-655.765C36.0371,-642.68 17,-621.75 17,-598 17,-598 17,-598 17,-191 17,-179.462 16.5138,-174.78 24,-166 37.4656,-150.207 57.3681,-139.421 76.0264,-132.21"/>
<polygon fill="darkgreen" stroke="darkgreen" points="77.4036,-135.434 85.6294,-128.757 75.0349,-128.847 77.4036,-135.434"/>
</g>
<!-- vcl_hit&#45;&gt;vcl_pass -->
<g id="edge14" class="edge"><title>vcl_hit&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M86.0573,-654.731C95.7147,-644.937 108.434,-632.039 119.304,-621.016"/>
<polygon fill="red" stroke="red" points="121.944,-623.323 126.474,-613.745 116.96,-618.408 121.944,-623.323"/>
</g>
<!-- vcl_miss -->
<g id="node7" class="node"><title>vcl_miss</title>
<ellipse fill="none" stroke="black" cx="265" cy="-671" rx="42.3701" ry="18"/>
<text text-anchor="middle" x="265" y="-667.3" font-family="Times,serif" font-size="14.00">vcl_miss</text>
</g>
<!-- vcl_miss&#45;&gt;vcl_pass -->
<g id="edge18" class="edge"><title>vcl_miss&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M241.284,-656.118C222.311,-645.012 195.505,-629.32 174.528,-617.041"/>
<polygon fill="red" stroke="red" points="176.041,-613.871 165.643,-611.84 172.505,-619.912 176.041,-613.871"/>
</g>
<!-- vcl_backend_fetch -->
<g id="node14" class="node"><title>vcl_backend_fetch</title>
<ellipse fill="none" stroke="black" cx="210" cy="-502" rx="77.0154" ry="18"/>
<text text-anchor="middle" x="210" y="-498.3" font-family="Times,serif" font-size="14.00">vcl_backend_fetch</text>
</g>
<!-- vcl_miss&#45;&gt;vcl_backend_fetch -->
<g id="edge15" class="edge"><title>vcl_miss&#45;&gt;vcl_backend_fetch</title>
<path fill="none" stroke="black" d="M259.424,-653.068C249.87,-624.061 230.3,-564.639 218.86,-529.903"/>
<polygon fill="black" stroke="black" points="222.044,-528.38 215.591,-519.977 215.395,-530.57 222.044,-528.38"/>
</g>
<!-- vcl_purge -->
<g id="node8" class="node"><title>vcl_purge</title>
<ellipse fill="none" stroke="black" cx="371" cy="-671" rx="46.2191" ry="18"/>
<text text-anchor="middle" x="371" y="-667.3" font-family="Times,serif" font-size="14.00">vcl_purge</text>
</g>
<!-- vcl_purge&#45;&gt;vcl_synth -->
<g id="edge12" class="edge"><title>vcl_purge&#45;&gt;vcl_synth</title>
<path fill="none" stroke="purple" d="M384.61,-653.693C394.805,-639.798 407,-618.823 407,-598 407,-598 407,-598 407,-191 407,-176.205 407,-159.7 407,-146.229"/>
<polygon fill="purple" stroke="purple" points="410.5,-146.166 407,-136.166 403.5,-146.166 410.5,-146.166"/>
</g>
<!-- vcl_hash&#45;&gt;vcl_hit -->
<g id="edge7" class="edge"><title>vcl_hash&#45;&gt;vcl_hit</title>
<path fill="none" stroke="darkgreen" d="M270.03,-757.356C229.905,-755.157 168.765,-747.572 122,-723 109.58,-716.474 98.2621,-705.891 89.4609,-696.052"/>
<polygon fill="darkgreen" stroke="darkgreen" points="92.1118,-693.767 82.969,-688.413 86.7777,-698.3 92.1118,-693.767"/>
<text text-anchor="middle" x="129.5" y="-711.3" font-family="Times,serif" font-size="14.00">hit</text>
</g>
<!-- vcl_hash&#45;&gt;vcl_miss -->
<g id="edge8" class="edge"><title>vcl_hash&#45;&gt;vcl_miss</title>
<path fill="none" stroke="black" d="M302.938,-741.418C296.155,-729.006 286.751,-711.799 279.003,-697.622"/>
<polygon fill="black" stroke="black" points="282.062,-695.921 274.195,-688.824 275.919,-699.278 282.062,-695.921"/>
<text text-anchor="middle" x="306" y="-711.3" font-family="Times,serif" font-size="14.00">miss</text>
</g>
<!-- vcl_hash&#45;&gt;vcl_purge -->
<g id="edge11" class="edge"><title>vcl_hash&#45;&gt;vcl_purge</title>
<path fill="none" stroke="purple" d="M323.376,-741.418C332.028,-728.807 344.075,-711.246 353.888,-696.942"/>
<polygon fill="purple" stroke="purple" points="356.888,-698.757 359.659,-688.531 351.116,-694.797 356.888,-698.757"/>
<text text-anchor="middle" x="362.5" y="-711.3" font-family="Times,serif" font-size="14.00">purge</text>
</g>
<!-- vcl_hash&#45;&gt;vcl_pass -->
<g id="edge9" class="edge"><title>vcl_hash&#45;&gt;vcl_pass</title>
<path fill="none" stroke="red" d="M272.479,-752.588C234.761,-745.176 179.574,-728.006 151,-689 137.701,-670.846 136.37,-644.896 137.831,-625.349"/>
<polygon fill="red" stroke="red" points="141.33,-625.545 138.872,-615.239 134.366,-624.828 141.33,-625.545"/>
<text text-anchor="middle" x="182.5" y="-667.3" font-family="Times,serif" font-size="14.00">hit&#45;for&#45;pass</text>
</g>
<!-- waiting -->
<g id="node13" class="node"><title>waiting</title>
<polygon fill="none" stroke="black" points="520.17,-671 499.085,-689 456.915,-689 435.83,-671 456.915,-653 499.085,-653 520.17,-671"/>
<text text-anchor="middle" x="478" y="-667.3" font-family="Times,serif" font-size="14.00">waiting</text>
</g>
<!-- vcl_hash&#45;&gt;waiting -->
<g id="edge10" class="edge"><title>vcl_hash&#45;&gt;waiting</title>
<path fill="none" stroke="black" d="M345.191,-747.537C363.067,-741.37 385.238,-732.851 404,-723 419.298,-714.968 435.209,-704.341 448.339,-694.868"/>
<polygon fill="black" stroke="black" points="450.545,-697.59 456.531,-688.848 446.4,-691.949 450.545,-697.59"/>
<text text-anchor="middle" x="442" y="-711.3" font-family="Times,serif" font-size="14.00">busy</text>
</g>
<!-- vcl_pipe&#45;&gt;Done -->
<g id="edge6" class="edge"><title>vcl_pipe&#45;&gt;Done</title>
<path fill="none" stroke="orange" d="M498.984,-743.078C516.562,-727.44 540,-701.128 540,-672 540,-672 540,-672 540,-117 540,-70.9548 479.557,-51.9977 440.165,-44.5322"/>
<polygon fill="orange" stroke="orange" points="440.618,-41.0587 430.167,-42.795 439.42,-47.9553 440.618,-41.0587"/>
</g>
<!-- vcl_pass&#45;&gt;vcl_backend_fetch -->
<g id="edge17" class="edge"><title>vcl_pass&#45;&gt;vcl_backend_fetch</title>
<path fill="none" stroke="black" d="M154.157,-579.373C164.536,-565.179 179.624,-544.544 191.501,-528.3"/>
<polygon fill="black" stroke="black" points="194.642,-529.934 197.719,-519.796 188.991,-525.803 194.642,-529.934"/>
</g>
<!-- waiting&#45;&gt;vcl_hash -->
<g id="edge16" class="edge"><title>waiting&#45;&gt;vcl_hash</title>
<path fill="none" stroke="black" d="M450.307,-683.616C436.132,-689.929 418.791,-698.228 404,-707 393.601,-713.167 392.331,-716.72 382,-723 371.583,-729.332 359.87,-735.525 349.049,-740.898"/>
<polygon fill="black" stroke="black" points="347.281,-737.866 339.824,-745.392 350.347,-744.159 347.281,-737.866"/>
</g>
<!-- decision1 -->
<g id="node15" class="node"><title>decision1</title>
<polygon fill="none" stroke="black" points="210,-446 91.6432,-428 210,-410 328.357,-428 210,-446"/>
<text text-anchor="middle" x="210" y="-424.3" font-family="Times,serif" font-size="14.00">read beresp(headers)</text>
</g>
<!-- vcl_backend_fetch&#45;&gt;decision1 -->
<g id="edge19" class="edge"><title>vcl_backend_fetch&#45;&gt;decision1</title>
<path fill="none" stroke="black" d="M210,-483.937C210,-475.807 210,-465.876 210,-456.705"/>
<polygon fill="black" stroke="black" points="213.5,-456.441 210,-446.441 206.5,-456.441 213.5,-456.441"/>
</g>
<!-- vcl_backend_response -->
<g id="node16" class="node"><title>vcl_backend_response</title>
<ellipse fill="none" stroke="black" cx="126" cy="-354" rx="90.0136" ry="18"/>
<text text-anchor="middle" x="126" y="-350.3" font-family="Times,serif" font-size="14.00">vcl_backend_response</text>
</g>
<!-- decision1&#45;&gt;vcl_backend_response -->
<g id="edge20" class="edge"><title>decision1&#45;&gt;vcl_backend_response</title>
<path fill="none" stroke="black" d="M193.001,-412.43C181.647,-402.698 166.46,-389.68 153.416,-378.5"/>
<polygon fill="black" stroke="black" points="155.495,-375.672 145.625,-371.821 150.939,-380.987 155.495,-375.672"/>
</g>
<!-- vcl_backend_error -->
<g id="node17" class="node"><title>vcl_backend_error</title>
<ellipse fill="none" stroke="black" cx="311" cy="-354" rx="76.5394" ry="18"/>
<text text-anchor="middle" x="311" y="-350.3" font-family="Times,serif" font-size="14.00">vcl_backend_error</text>
</g>
<!-- decision1&#45;&gt;vcl_backend_error -->
<g id="edge21" class="edge"><title>decision1&#45;&gt;vcl_backend_error</title>
<path fill="none" stroke="black" d="M229.954,-412.775C244.249,-402.585 263.775,-388.665 280.079,-377.043"/>
<polygon fill="black" stroke="black" points="282.156,-379.861 288.267,-371.206 278.092,-374.161 282.156,-379.861"/>
</g>
<!-- decision4 -->
<g id="node18" class="node"><title>decision4</title>
<polygon fill="none" stroke="black" points="126,-298 56.7149,-280 126,-262 195.285,-280 126,-298"/>
<text text-anchor="middle" x="126" y="-276.3" font-family="Times,serif" font-size="14.00">cacheable?</text>
</g>
<!-- vcl_backend_response&#45;&gt;decision4 -->
<g id="edge22" class="edge"><title>vcl_backend_response&#45;&gt;decision4</title>
<path fill="none" stroke="black" d="M126,-335.937C126,-327.807 126,-317.876 126,-308.705"/>
<polygon fill="black" stroke="black" points="129.5,-308.441 126,-298.441 122.5,-308.441 129.5,-308.441"/>
</g>
<!-- cache -->
<g id="node19" class="node"><title>cache</title>
<polygon fill="none" stroke="black" points="217,-210 163,-210 163,-174 217,-174 217,-210"/>
<text text-anchor="middle" x="190" y="-188.3" font-family="Times,serif" font-size="14.00">cache</text>
</g>
<!-- decision4&#45;&gt;cache -->
<g id="edge23" class="edge"><title>decision4&#45;&gt;cache</title>
<path fill="none" stroke="blue" d="M143.938,-266.516C151.764,-260.406 160.595,-252.533 167,-244 172.532,-236.63 177.123,-227.718 180.71,-219.419"/>
<polygon fill="blue" stroke="blue" points="183.979,-220.672 184.456,-210.088 177.483,-218.064 183.979,-220.672"/>
<text text-anchor="middle" x="186.5" y="-232.3" font-family="Times,serif" font-size="14.00">yes</text>
</g>
<!-- nocache -->
<g id="node20" class="node"><title>nocache</title>
<polygon fill="none" stroke="black" points="145,-210 59,-210 59,-174 145,-174 145,-210"/>
<text text-anchor="middle" x="102" y="-188.3" font-family="Times,serif" font-size="14.00">do not cache</text>
</g>
<!-- decision4&#45;&gt;nocache -->
<g id="edge24" class="edge"><title>decision4&#45;&gt;nocache</title>
<path fill="none" stroke="red" d="M114.741,-264.856C110.566,-258.791 106.292,-251.405 104,-244 101.694,-236.551 100.737,-228.197 100.475,-220.44"/>
<polygon fill="red" stroke="red" points="103.975,-220.377 100.485,-210.374 96.9745,-220.37 103.975,-220.377"/>
<text text-anchor="middle" x="135.5" y="-232.3" font-family="Times,serif" font-size="14.00">hit&#45;for&#45;pass</text>
</g>
<!-- cache&#45;&gt;vcl_deliver -->
<g id="edge25" class="edge"><title>cache&#45;&gt;vcl_deliver</title>
<path fill="none" stroke="blue" d="M174.833,-173.937C166.666,-164.749 156.454,-153.261 147.484,-143.169"/>
<polygon fill="blue" stroke="blue" points="149.877,-140.594 140.618,-135.445 144.645,-145.244 149.877,-140.594"/>
</g>
<!-- nocache&#45;&gt;vcl_deliver -->
<g id="edge26" class="edge"><title>nocache&#45;&gt;vcl_deliver</title>
<path fill="none" stroke="red" d="M107.688,-173.937C110.497,-165.508 113.952,-155.143 117.101,-145.696"/>
<polygon fill="red" stroke="red" points="120.511,-146.534 120.353,-135.941 113.87,-144.321 120.511,-146.534"/>
</g>
</g>
</svg>
